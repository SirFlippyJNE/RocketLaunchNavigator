<!DOCTYPE html>
<html>
    <head>
        <title>Previous Launches | Rocket Launch Navigator</title>
        <link rel="icon" href="RocketLaunchNavigatorIcon.ico" type="image/ico">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <header>
          <a href="index" class="button">Home</a> 
          <a href="upcominglaunches" class="button">Upcoming Launches</a> 
          <a href="previouslaunches" class="button">Previous Launches</a>
          <a href="all-launches" class="button">All Launches</a>
            <header>Previous Launches</header>
        </header>
        <div class="launch-container">
          <script>
            let renderedLaunches = 0;
            const apiUrl = 'http://127.0.0.1:5000/launches/previous'; // Update this URL

            async function fetchRocketLaunches() {
              try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                  throw new Error('Failed to fetch data from the API');
                }
                const data = await response.json();

                if (Array.isArray(data)) { // Assuming your API returns an array of launches
                  data.forEach((launch) => {
                    const { name, mission, date} = launch; // Replace with actual property names
                    const launchItem = document.createElement('div');
                    launchItem.classList.add('launch-item');


                    const launchBox = document.createElement('div');
                    launchBox.classList.add('launch-box');
                    launchBox.innerHTML = `
                      <h2>${name}</h2>
                      <p>Mission: ${mission}</p>
                      <p>Date: ${date}</p>
                    `;

                    launchItem.appendChild(launchBox);
                    document.querySelector('.launch-container').appendChild(launchItem);

                    renderedLaunches++;
                    if (renderedLaunches >= 60) {
                      return;
                    }
                  });
                } else {
                  const noDataText = document.createElement('p');
                  noDataText.textContent = 'No launch data available.';
                  document.body.appendChild(noDataText);
                }
              } catch (error) {
                const errorText = document.createElement('p');
                errorText.textContent = `An error occurred while fetching the data: ${error}`;
                document.body.appendChild(errorText);
              }
            }

            fetchRocketLaunches();
          </script>
          </div>
    </body>
</html>